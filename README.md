# URL Shortener API

URL Shortener à la bit.ly but humbler. The Shortener is exposed through an API with endpoints to create a redirect between short url to target url, configure target url for different types of devices, get statistics about redirects, and hit short url and get redirected to target url.

## Installing

- Clone this repository

- Change into the repository folder

- Install Python 3 using pyenv or similar (if necessary, the code was tested for Python 3.6.2)

- Create a virtual environment

```
python -m venv venv
```

- Install base and dev dependencies

```
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

## Running the tests

- Run tests

```
make test
```

## API Usage

** Redirect to target url **

* **URL**

  /:hashed_id

*  **Method:**
  
   `GET`

* **URL Params:**
  **Required:**
  `hashed_id=[string]`

* **Success Response:**

  * **Code:** 302 FOUND <br />
    **Content:** `{ }`
 
* **Error Response:**

  * **Code:** 404 NOT FOUND <br />
    **Content:** `{ error : "User doesn't exist" }`

## Design Decisions

### API

### DB Schema

### Hashing

When a target url (also long url) is submitted to create a redirect a one-to-one correspondence between a hash and the target url has to be established. The hash will be used late to generate the short url.

The mechanism currently used here to generate the mentioned hash is based on a bijective function provided a certain alphabet to convert from digits to characters.

Hashing is an area where several changes and improvements could come up and that was taken into account in the hashing package by adding an abstract base class that enforces to implement the encoding method since it's the one used in the project.

Things that should be take into account for improvements:

- The current mechanism uses the auto generated id generated by the database in primary key field, by using a hashing function on it manages to obfuscate the id, said that we can foresee the id could be guessed back which probably we want to avoid happening.

- The hashed ids generated have variable length but could be convenient to generate fixed length hashed ids.
